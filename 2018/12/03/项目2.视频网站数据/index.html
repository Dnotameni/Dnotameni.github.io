
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç† | DnoBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1234import numpy as np import pandas as pdimport matplotlib.pyplot as plt%matplotlib inline 1234567891011121314151617#è¯»å–æ•°æ®data = pd.read_csv(r&apos;...path\çˆ±å¥‡è‰ºè§†é¢‘æ•°æ®.csv&apos;,engine = &apos;python&apos;)#print(data.head()">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†">
<meta property="og:url" content="http://yoursite.com/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/index.html">
<meta property="og:site_name" content="DnoBlog">
<meta property="og:description" content="1234import numpy as np import pandas as pdimport matplotlib.pyplot as plt%matplotlib inline 1234567891011121314151617#è¯»å–æ•°æ®data = pd.read_csv(r&apos;...path\çˆ±å¥‡è‰ºè§†é¢‘æ•°æ®.csv&apos;,engine = &apos;python&apos;)#print(data.head()">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/2_1.png">
<meta property="og:image" content="http://yoursite.com/images/2_2.png">
<meta property="og:image" content="http://yoursite.com/images/2_3.png">
<meta property="og:updated_time" content="2019-02-16T08:38:55.333Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†">
<meta name="twitter:description" content="1234import numpy as np import pandas as pdimport matplotlib.pyplot as plt%matplotlib inline 1234567891011121314151617#è¯»å–æ•°æ®data = pd.read_csv(r&apos;...path\çˆ±å¥‡è‰ºè§†é¢‘æ•°æ®.csv&apos;,engine = &apos;python&apos;)#print(data.head()">
<meta name="twitter:image" content="http://yoursite.com/images/2_1.png">
  
    <link rel="alternative" href="/atom.xml" title="DnoBlog" type="application/atom+xml">
  
  
     <link href="/favicon.ico" rel="icon" type="image/x-ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">DnoBlog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">å­¦ä¼šæ€è€ƒ</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">æ–‡ç« åˆ—è¡¨</a>
        
          <a class="main-nav-link" href="/about">å…³äº</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yoursite.com">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/" class="article-date">
  <time datetime="2018-12-03T04:52:00.000Z" itemprop="datePublished">2018-12-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>â–º<a class="article-category-link" href="/categories/python/é¡¹ç›®å­¦ä¹ /">é¡¹ç›®å­¦ä¹ </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯»å–æ•°æ®</span></span><br><span class="line">data = pd.read_csv(<span class="string">r'...path\çˆ±å¥‡è‰ºè§†é¢‘æ•°æ®.csv'</span>,engine = <span class="string">'python'</span>)</span><br><span class="line"><span class="comment">#print(data.head())</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''1ã€æ•°æ®æ¸…æ´— - å»é™¤ç©ºå€¼</span></span><br><span class="line"><span class="string">è¦æ±‚ï¼šåˆ›å»ºå‡½æ•°</span></span><br><span class="line"><span class="string">æç¤ºï¼šfillnaæ–¹æ³•å¡«å……ç¼ºå¤±æ•°æ®ï¼Œæ³¨æ„inplaceå‚æ•°'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_cleaning</span><span class="params">(df)</span>:</span></span><br><span class="line">    cols = df.columns</span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> cols:</span><br><span class="line">        <span class="keyword">if</span> df[col].dtype == <span class="string">'object'</span>:         <span class="comment">#æ•°æ®ç±»å‹çš„åˆ¤æ–­</span></span><br><span class="line">            df[col].fillna(<span class="string">'ç¼ºå¤±æ•°æ®'</span>,inplace=<span class="keyword">True</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            df[col].fillna(<span class="number">0</span>,inplace=<span class="keyword">True</span>)</span><br><span class="line">    <span class="keyword">return</span>(df)</span><br><span class="line">data_c = data_cleaning(data)        </span><br><span class="line">print(data_c.head(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<pre><code>       æ•°æ®è·å–æ—¥æœŸ    æ¼”å‘˜  è§†é¢‘ID                                        è¯¦ç»†é“¾æ¥  \
0  2016å¹´5æœˆ24æ—¥  ç¼ºå¤±æ•°æ®   100  http://www.iqiyi.com/dianshiju/douyu2.html   
1  2016å¹´5æœˆ24æ—¥  ç¼ºå¤±æ•°æ®  1037   http://www.iqiyi.com/dianshiju/jhuxd.html   
2  2016å¹´5æœˆ24æ—¥  ç¼ºå¤±æ•°æ®  1573  http://www.iqiyi.com/dianshiju/fmxqj2.html   

               å‰§å   çŠ¶æ€                     ç±»å‹ æ¥æºå¹³å°     æ•´ç†åå‰§å  æ›´æ–°æ—¶é—´   ...     \
0     æ–—é±¼â…¡(1-20)å…¨é›†  å·²å®Œç»“  ç²¤è¯­ç”µè§†å‰§/å¶åƒå‰§/è¨€æƒ…å‰§/è¶…æ¸…1080P  çˆ±å¥‡è‰º       æ–—é±¼2  ç¼ºå¤±æ•°æ®   ...      
1    æ±Ÿæ¹–å…„å¼Ÿ(1-32)å…¨é›†  å·²å®Œç»“  ç²¤è¯­ç”µè§†å‰§/æ‚¬ç–‘å‰§/å¹´ä»£å‰§/è¶…æ¸…1080P  çˆ±å¥‡è‰º    æ±Ÿæ¹–å…„å¼Ÿå…¨é›†  ç¼ºå¤±æ•°æ®   ...      
2  è‚¥çŒ«å¯»äº²è®°2(1-30)å…¨é›†  å·²å®Œç»“           ç²¤è¯­ç”µè§†å‰§/å®¶åº­å‰§/å–œå‰§  çˆ±å¥‡è‰º  è‚¥çŒ«å¯»äº²è®°2å…¨é›†  ç¼ºå¤±æ•°æ®   ...      

     ä¸Šæ˜ å¹´ä»½                                                 ç®€ä»‹    å¯¼æ¼”     å·®è¯„æ•°  \
0  2004.0  åœ¨å•å­æ€äº†é˜¿è±¹æ´¾å»å¼ºæš´è¯­ç‡•çš„æ‰‹ä¸‹è€Œå…¥ç‹±åï¼Œä¼—äººçš„ç”Ÿæ´»éƒ½æœ‰äº†æ”¹å˜ã€‚è¯­ç‡•ä¸ºäº†è®©è‡ªå·±ä¸å†æ˜¯äºçš“çš„åŒ…...  ç¼ºå¤±æ•°æ®  2034.0   
1  2008.0  1930å¹´ä»£ï¼Œæµ·é¾™åŸé¦–å¯Œå”è‹±æ˜ç”¨äº”æ–—ä¸Šç­‰çç ï¼Œå‡»è´¥åˆ—å›½å•†ä¸šå¯¹æ‰‹ï¼Œä¹°å¾—ä¸é“è¾¾å°¼é½åä¹‹å¥¥ä¸½å·é‚®è½®...  ç¼ºå¤±æ•°æ®  7291.0   
2  2005.0  è‚¥çŒ«ç»å†äº†å‡ ç•ªé£é›¨ï¼Œç»ˆäºå¯»å›äº†ä»–çš„äº²ç”Ÿå¼Ÿå¦¹ä»¬ï¼šå¹´è½»æœ‰ä¸ºçš„åŒ»ç”ŸäºŒå¼Ÿåä¸–æ°ã€å¤§å¾‹å¸ˆä¸‰å¦¹å©‰å®¹ã€ç¾ä¸½...  ç¼ºå¤±æ•°æ®  1183.0   

      è¯„åˆ†äººæ•°         æ’­æ”¾é‡  æ›´æ–°è‡³   æ€»é›†æ•°  ç¬¬å‡ å­£      å¥½è¯„æ•°  
0  32722.0   8069526.0  0.0  20.0    2  30688.0  
1  39492.0  70213917.0  0.0  32.0    1  32201.0  
2  10105.0   3310768.0  0.0  30.0    1   8922.0  

[3 rows x 24 columns]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''2ã€æ•°æ®æ¸…æ´— - æ—¶é—´æ ‡ç­¾è½¬åŒ–</span></span><br><span class="line"><span class="string">è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">â‘  å°†æ—¶é—´å­—æ®µæ”¹ä¸ºæ—¶é—´æ ‡ç­¾</span></span><br><span class="line"><span class="string">â‘¡ åˆ›å»ºå‡½æ•°</span></span><br><span class="line"><span class="string">æç¤ºï¼š</span></span><br><span class="line"><span class="string">éœ€è¦å°†ä¸­æ–‡æ—¥æœŸè½¬åŒ–ä¸ºéä¸­æ–‡æ—¥æœŸï¼Œä¾‹å¦‚ 2016å¹´5æœˆ24æ—¥ â†’ 2016.5.24'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timechange</span><span class="params">(df,*cols)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> cols:</span><br><span class="line">        df[col] = df[col].astype(str).str.replace(<span class="string">'å¹´'</span>,<span class="string">'.'</span>)     <span class="comment">#.astype(str).str.replace</span></span><br><span class="line">        df[col] = df[col].astype(str).str.replace(<span class="string">'æœˆ'</span>,<span class="string">'.'</span>)</span><br><span class="line">        df[col] = df[col].astype(str).str.replace(<span class="string">'æ—¥'</span>,<span class="string">''</span>)</span><br><span class="line">        df[col] = pd.to_datetime(df[col])</span><br><span class="line">    <span class="keyword">return</span>(df)</span><br><span class="line"><span class="comment"># è¯¥å‡½æ•°å°†è¾“å…¥åˆ—åçš„åˆ—ï¼Œæ”¹ä¸ºDatetimeIndexæ ¼å¼</span></span><br><span class="line"></span><br><span class="line">data_c2 = timechange(data_c,<span class="string">'æ•°æ®è·å–æ—¥æœŸ'</span>)</span><br><span class="line">print(data_c2.head(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>      æ•°æ®è·å–æ—¥æœŸ    æ¼”å‘˜  è§†é¢‘ID                                        è¯¦ç»†é“¾æ¥  \
0 2016-05-24  ç¼ºå¤±æ•°æ®   100  http://www.iqiyi.com/dianshiju/douyu2.html   
1 2016-05-24  ç¼ºå¤±æ•°æ®  1037   http://www.iqiyi.com/dianshiju/jhuxd.html   
2 2016-05-24  ç¼ºå¤±æ•°æ®  1573  http://www.iqiyi.com/dianshiju/fmxqj2.html   

               å‰§å   çŠ¶æ€                     ç±»å‹ æ¥æºå¹³å°     æ•´ç†åå‰§å  æ›´æ–°æ—¶é—´   ...     \
0     æ–—é±¼â…¡(1-20)å…¨é›†  å·²å®Œç»“  ç²¤è¯­ç”µè§†å‰§/å¶åƒå‰§/è¨€æƒ…å‰§/è¶…æ¸…1080P  çˆ±å¥‡è‰º       æ–—é±¼2  ç¼ºå¤±æ•°æ®   ...      
1    æ±Ÿæ¹–å…„å¼Ÿ(1-32)å…¨é›†  å·²å®Œç»“  ç²¤è¯­ç”µè§†å‰§/æ‚¬ç–‘å‰§/å¹´ä»£å‰§/è¶…æ¸…1080P  çˆ±å¥‡è‰º    æ±Ÿæ¹–å…„å¼Ÿå…¨é›†  ç¼ºå¤±æ•°æ®   ...      
2  è‚¥çŒ«å¯»äº²è®°2(1-30)å…¨é›†  å·²å®Œç»“           ç²¤è¯­ç”µè§†å‰§/å®¶åº­å‰§/å–œå‰§  çˆ±å¥‡è‰º  è‚¥çŒ«å¯»äº²è®°2å…¨é›†  ç¼ºå¤±æ•°æ®   ...      

     ä¸Šæ˜ å¹´ä»½                                                 ç®€ä»‹    å¯¼æ¼”     å·®è¯„æ•°  \
0  2004.0  åœ¨å•å­æ€äº†é˜¿è±¹æ´¾å»å¼ºæš´è¯­ç‡•çš„æ‰‹ä¸‹è€Œå…¥ç‹±åï¼Œä¼—äººçš„ç”Ÿæ´»éƒ½æœ‰äº†æ”¹å˜ã€‚è¯­ç‡•ä¸ºäº†è®©è‡ªå·±ä¸å†æ˜¯äºçš“çš„åŒ…...  ç¼ºå¤±æ•°æ®  2034.0   
1  2008.0  1930å¹´ä»£ï¼Œæµ·é¾™åŸé¦–å¯Œå”è‹±æ˜ç”¨äº”æ–—ä¸Šç­‰çç ï¼Œå‡»è´¥åˆ—å›½å•†ä¸šå¯¹æ‰‹ï¼Œä¹°å¾—ä¸é“è¾¾å°¼é½åä¹‹å¥¥ä¸½å·é‚®è½®...  ç¼ºå¤±æ•°æ®  7291.0   
2  2005.0  è‚¥çŒ«ç»å†äº†å‡ ç•ªé£é›¨ï¼Œç»ˆäºå¯»å›äº†ä»–çš„äº²ç”Ÿå¼Ÿå¦¹ä»¬ï¼šå¹´è½»æœ‰ä¸ºçš„åŒ»ç”ŸäºŒå¼Ÿåä¸–æ°ã€å¤§å¾‹å¸ˆä¸‰å¦¹å©‰å®¹ã€ç¾ä¸½...  ç¼ºå¤±æ•°æ®  1183.0   

      è¯„åˆ†äººæ•°         æ’­æ”¾é‡  æ›´æ–°è‡³   æ€»é›†æ•°  ç¬¬å‡ å­£      å¥½è¯„æ•°  
0  32722.0   8069526.0  0.0  20.0    2  30688.0  
1  39492.0  70213917.0  0.0  32.0    1  32201.0  
2  10105.0   3310768.0  0.0  30.0    1   8922.0  

[3 rows x 24 columns]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''3ã€é—®é¢˜1 åˆ†æå‡ºä¸åŒå¯¼æ¼”ç”µå½±çš„å¥½è¯„ç‡ï¼Œå¹¶ç­›é€‰å‡ºTOP20</span></span><br><span class="line"><span class="string">è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">â‘  è®¡ç®—ç»Ÿè®¡å‡ºä¸åŒå¯¼æ¼”çš„å¥½è¯„ç‡ï¼Œä¸è¦æ±‚åˆ›å»ºå‡½æ•°</span></span><br><span class="line"><span class="string">â‘¡ é€šè¿‡å¤šç³»åˆ—æŸ±çŠ¶å›¾ï¼Œåšå›¾è¡¨å¯è§†åŒ–</span></span><br><span class="line"><span class="string">æç¤ºï¼š</span></span><br><span class="line"><span class="string">â‘  å¥½è¯„ç‡ = å¥½è¯„æ•° / è¯„åˆ†äººæ•°</span></span><br><span class="line"><span class="string">â‘¡ å¯è‡ªå·±è®¾å®šå›¾è¡¨é£æ ¼'''</span></span><br><span class="line"></span><br><span class="line">data_director = data_c2.groupby(<span class="string">'å¯¼æ¼”'</span>).sum()[[<span class="string">'å¥½è¯„æ•°'</span>,<span class="string">'è¯„åˆ†äººæ•°'</span>]]</span><br><span class="line">data_director[<span class="string">'å¥½è¯„ç‡'</span>] = data_director[<span class="string">'å¥½è¯„æ•°'</span>]/data_director[<span class="string">'è¯„åˆ†äººæ•°'</span>]</span><br><span class="line">result_q1 = data_director.sort_values([<span class="string">'å¥½è¯„ç‡'</span>],ascending=<span class="keyword">False</span>)[:<span class="number">20</span>]   <span class="comment">#å‰20å</span></span><br><span class="line"><span class="comment">#è®¡ç®—ç»Ÿè®¡ä¸åŒå¯¼æ¼”çš„å¥½è¯„ç‡</span></span><br><span class="line">print(result_q1)</span><br><span class="line"></span><br><span class="line">result_q1[<span class="string">'å¥½è¯„ç‡'</span>].plot(kind=<span class="string">'bar'</span>,</span><br><span class="line">                     color = <span class="string">'k'</span>,</span><br><span class="line">                     width = <span class="number">0.8</span>,</span><br><span class="line">                     alpha = <span class="number">0.4</span>,</span><br><span class="line">                     rot =<span class="number">45</span>,</span><br><span class="line">                     grid = <span class="keyword">True</span>,</span><br><span class="line">                     ylim = [<span class="number">0.98</span>,<span class="number">1</span>],</span><br><span class="line">                     figsize=(<span class="number">12</span>,<span class="number">4</span>),</span><br><span class="line">                     title = <span class="string">'ä¸åŒå¯¼æ¼”çš„ç”µå½±å¥½è¯„ç‡'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>                  å¥½è¯„æ•°          è¯„åˆ†äººæ•°       å¥½è¯„ç‡
å¯¼æ¼”                                           
ç‹é™       5.601448e+06  5.602704e+06  0.999776
è§é”‹       4.415545e+07  4.416801e+07  0.999716
å‘ç¼       3.685386e+06  3.691240e+06  0.998414
ä¹Œå…°å¡”å¨œ     1.916524e+07  1.920091e+07  0.998142
å¾å®—æ”¿      3.113422e+06  3.123920e+06  0.996639
æ¬§å‡¡       3.088701e+06  3.100421e+06  0.996220
è‚–å…‰è¾‰      3.264290e+05  3.284140e+05  0.993956
å¼ å›½ç«‹/ç½—é•¿å®‰  8.177111e+06  8.230880e+06  0.993467
åˆ˜é€¢å£°/æ—å³°   3.591638e+06  3.617351e+06  0.992892
æ—æ·»ä¸€      1.049628e+09  1.057556e+09  0.992504
æ¯›å°‰å…‰      1.747925e+06  1.766237e+06  0.989632
éƒ­ä¸œæ—­      1.027664e+06  1.039609e+06  0.988510
è‹æ²…å³°/å¼ è‰ºè…¾  3.600976e+06  3.643071e+06  0.988445
è¢åˆš/æˆå¿—è¶…   1.185439e+07  1.200596e+07  0.987375
èƒ¡é›ªæ¨      1.042170e+06  1.056247e+06  0.986673
ä¸æ™“é›„      1.568219e+06  1.591727e+06  0.985231
å»¶è‰º       4.094535e+07  4.157757e+07  0.984794
æ½‡åº¸       5.338679e+06  5.427978e+06  0.983548
ç™½ç¾½/é™ˆè¿…    1.705608e+07  1.737295e+07  0.981761
å¼ è ¡/å§œå³°    2.100617e+08  2.143382e+08  0.980047





&lt;matplotlib.axes._subplots.AxesSubplot at 0x207629e5ac8&gt;
</code></pre><p><img src="/images/2_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''4ã€é—®é¢˜2 ç»Ÿè®¡åˆ†æ2001-2016å¹´æ¯å¹´è¯„å½±äººæ•°æ€»é‡</span></span><br><span class="line"><span class="string">è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">â‘  è®¡ç®—ç»Ÿè®¡å‡º2001-2016å¹´æ¯å¹´è¯„å½±äººæ•°æ€»é‡ï¼Œä¸è¦æ±‚åˆ›å»ºå‡½æ•°</span></span><br><span class="line"><span class="string">â‘¡ é€šè¿‡é¢ç§¯å›¾ï¼Œåšå›¾è¡¨å¯è§†åŒ–ï¼Œåˆ†ææ¯å¹´äººæ•°æ€»é‡å˜åŒ–è§„å¾‹</span></span><br><span class="line"><span class="string">â‘¢ éªŒè¯æ˜¯å¦æœ‰å¼‚å¸¸å€¼ï¼ˆæåº¦å¼‚å¸¸ï¼‰</span></span><br><span class="line"><span class="string">â‘£ åˆ›å»ºå‡½æ•°åˆ†æå‡ºæ•°æ®å¤–é™æœ€å¤§æœ€å°å€¼ï¼‰</span></span><br><span class="line"><span class="string">â‘¤ ç­›é€‰æŸ¥çœ‹å¼‚å¸¸å€¼ â†’ æ˜¯å¦å¼‚å¸¸å€¼å°±æ˜¯æ¯å¹´çš„çƒ­é—¨ç”µå½±ï¼Ÿ</span></span><br><span class="line"><span class="string">æç¤ºï¼š</span></span><br><span class="line"><span class="string">â‘  é€šè¿‡ç®±å‹å›¾éªŒè¯å¼‚å¸¸å€¼æƒ…å†µ</span></span><br><span class="line"><span class="string">â‘¡ é€šè¿‡quantile(q=0.5)æ–¹æ³•ï¼Œå¾—åˆ°å››åˆ†ä½æ•°</span></span><br><span class="line"><span class="string">â‘¢ IQR=Q3-Q1</span></span><br><span class="line"><span class="string">â‘£ å¤–é™ï¼šæœ€å¤§å€¼åŒºé—´Q3+3IQR,æœ€å°å€¼åŒºé—´Q1-3IQR ï¼ˆIQR=Q3-Q1ï¼‰</span></span><br><span class="line"><span class="string">â‘¤ å¯è‡ªå·±è®¾å®šå›¾è¡¨é£æ ¼'''</span></span><br><span class="line"></span><br><span class="line">data_year = data_c2[[<span class="string">'å¯¼æ¼”'</span>,<span class="string">'ä¸Šæ˜ å¹´ä»½'</span>,<span class="string">'æ•´ç†åå‰§å'</span>]].drop_duplicates()</span><br><span class="line">data_year = data_year[data_year[<span class="string">'ä¸Šæ˜ å¹´ä»½'</span>] != <span class="number">0</span> ]</span><br><span class="line"><span class="comment"># ç­›é€‰å‡ºä¸åŒå¹´ä»½çš„æ•°æ®ï¼Œå»é™¤â€˜ä¸Šæ˜ å¹´ä»½â€™å­—æ®µç¼ºå¤±æ•°æ®</span></span><br><span class="line">print(data_year.head())</span><br><span class="line"></span><br><span class="line">data_year1 = data_c2.groupby(<span class="string">'æ•´ç†åå‰§å'</span>).sum()[[<span class="string">'è¯„åˆ†äººæ•°'</span>,<span class="string">'å¥½è¯„æ•°'</span>]]</span><br><span class="line">print(data_year1.head())</span><br><span class="line"><span class="comment"># æ±‚å‡ºä¸åŒå‰§çš„è¯„åˆ†äººæ•°ã€å¥½è¯„æ•°æ€»å’Œ</span></span><br><span class="line"></span><br><span class="line">data_year2 = pd.merge(data_year,data_year1,left_on=<span class="string">'æ•´ç†åå‰§å'</span>,right_index = <span class="keyword">True</span>)</span><br><span class="line">print(data_year2.head())</span><br><span class="line"><span class="comment"># åˆå¹¶æ•°æ®ï¼Œå¾—åˆ°ä¸åŒå¹´ä»½ï¼Œä¸åŒå‰§çš„è¯„åˆ†äººæ•°ã€å¥½è¯„æ•°æ€»å’Œ</span></span><br><span class="line"></span><br><span class="line">data_year3 = data_year2.groupby(<span class="string">'ä¸Šæ˜ å¹´ä»½'</span>).sum()[[<span class="string">'è¯„åˆ†äººæ•°'</span>,<span class="string">'å¥½è¯„æ•°'</span>]]</span><br><span class="line">print(data_year3.head())</span><br><span class="line"></span><br><span class="line">figq = plt.figure(figsize=(<span class="number">12</span>,<span class="number">4</span>))</span><br><span class="line">data_year3[<span class="string">'è¯„åˆ†äººæ•°'</span>].loc[<span class="number">2000</span>:].plot.area(figsize= (<span class="number">10</span>,<span class="number">4</span>),        <span class="comment">#2000å¹´åçš„æ•°æ®</span></span><br><span class="line">                                       grid = <span class="keyword">True</span>,</span><br><span class="line">                                       color = <span class="string">'g'</span>,</span><br><span class="line">                                       alpha= <span class="number">0.8</span>)</span><br><span class="line">plt.xticks(range(<span class="number">2001</span>,<span class="number">2016</span>))</span><br><span class="line">plt.title(<span class="string">'2001-2016å¹´æ¯å¹´è¯„å½±äººæ•°æ€»é‡ç»Ÿè®¡'</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºé¢ç§¯å›¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯å¹´å½±è¯„äººæ•°é€šè¿‡æ¯ä¸ªç”µå½±æ¥åˆ¤æ–­æ˜¯å¦åˆç†ï¼Ÿ</span></span><br><span class="line"><span class="comment"># å­˜åœ¨å¼‚å¸¸å€¼ï¼Œå“ªäº›æ˜¯å¼‚å¸¸å€¼ï¼Ÿ</span></span><br><span class="line">fig,axes = plt.subplots(<span class="number">4</span>,<span class="number">4</span>,figsize=(<span class="number">10</span>,<span class="number">16</span>))</span><br><span class="line">start =<span class="number">2001</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">        data = data_year2[data_year2[<span class="string">'ä¸Šæ˜ å¹´ä»½'</span>] == start]</span><br><span class="line">        data[[<span class="string">'è¯„åˆ†äººæ•°'</span>,<span class="string">'å¥½è¯„æ•°'</span>]].boxplot(whis = <span class="number">3</span>,<span class="comment"># IQRä¸º3</span></span><br><span class="line">                                    return_type=<span class="string">'dict'</span>,ax=axes[i,j])<span class="comment"># åˆ›å»ºçŸ©é˜µç®±å‹å›¾</span></span><br><span class="line">        start += <span class="number">1</span></span><br><span class="line"><span class="comment"># å‘ç°åŸºæœ¬æ¯å¹´çš„æ•°æ®ä¸­éƒ½æœ‰å¼‚å¸¸å€¼ï¼Œä¸”ä¸ºæåº¦å¼‚å¸¸</span></span><br></pre></td></tr></table></figure>
<pre><code>     å¯¼æ¼”    ä¸Šæ˜ å¹´ä»½     æ•´ç†åå‰§å
0  ç¼ºå¤±æ•°æ®  2004.0       æ–—é±¼2
1  ç¼ºå¤±æ•°æ®  2008.0    æ±Ÿæ¹–å…„å¼Ÿå…¨é›†
2  ç¼ºå¤±æ•°æ®  2005.0  è‚¥çŒ«å¯»äº²è®°2å…¨é›†
3  ç¼ºå¤±æ•°æ®  2006.0    èˆå°å§å¦¹å…¨é›†
4  ç¼ºå¤±æ•°æ®  2007.0   18ç¦ä¸ç¦å…¨é›†
                      è¯„åˆ†äººæ•°        å¥½è¯„æ•°
æ•´ç†åå‰§å                                
101ç½‘æ ¡é«˜è€ƒå†å²å†²åˆºè€ƒç‚¹è§£æ       90.0       78.0
10å“å®˜å´å±±ç¾Š            57715.0    38736.0
10å¤§å¥‡å†¤            3002099.0  2801151.0
10å¤©10å¤œ             18209.0    11299.0
10æŒ‡è¿å¿ƒ              14852.0    10617.0
     å¯¼æ¼”    ä¸Šæ˜ å¹´ä»½     æ•´ç†åå‰§å        è¯„åˆ†äººæ•°         å¥½è¯„æ•°
0  ç¼ºå¤±æ•°æ®  2004.0       æ–—é±¼2   1488378.0   1398674.0
1  ç¼ºå¤±æ•°æ®  2008.0    æ±Ÿæ¹–å…„å¼Ÿå…¨é›†   1809908.0   1477701.0
2  ç¼ºå¤±æ•°æ®  2005.0  è‚¥çŒ«å¯»äº²è®°2å…¨é›†    461860.0    407507.0
3  ç¼ºå¤±æ•°æ®  2006.0    èˆå°å§å¦¹å…¨é›†    120525.0     99885.0
4  ç¼ºå¤±æ•°æ®  2007.0   18ç¦ä¸ç¦å…¨é›†  34402833.0  31482452.0
             è¯„åˆ†äººæ•°        å¥½è¯„æ•°
ä¸Šæ˜ å¹´ä»½                        
1937.0    84367.0    63120.0
1985.0   163064.0   135462.0
1986.0    58593.0    41216.0
1987.0  3930018.0  3728651.0
1988.0   410722.0   337484.0
</code></pre><p><img src="/images/2_2.png" alt="png"></p>
<p><img src="/images/2_3.png" alt="png"></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/" data-id="cjs7du3oo0008hov0wfnxwdel" class="article-share-link" data-share="baidu" data-title="é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†">Share</a>
      

      
        <a href="http://yoursite.com/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/#ds-thread" class="article-comment-link">Comments</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/05/é¡¹ç›®3.comprehensive-data-exploration-with-python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          é¡¹ç›®å­¦ä¹ 3.Kaggleåˆ©ç”¨pythonå¯¹æ•°æ®çš„æ¢ç´¢æ€§ç†è§£
        
      </div>
    </a>
  
  
    <a href="/2018/12/01/é¡¹ç›®1.çŸ¥ä¹æ•°æ®æ¸…æ´—æ•´ç†å’Œç»“è®ºç ”ç©¶/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">é¡¹ç›®å­¦ä¹ 1.çŸ¥ä¹æ•°æ®æ¸…æ´—æ•´ç†å’Œç»“è®ºç ”ç©¶</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="ds-thread" class="ds-thread" data-thread-key="2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/" data-title="é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†" data-url="http://yoursite.com/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/"></div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/é¡¹ç›®å­¦ä¹ /">é¡¹ç›®å­¦ä¹ </a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç”Ÿæ´»ç‚¸é¸¡ğŸ¥/">ç”Ÿæ´»ç‚¸é¸¡ğŸ¥</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç«™ç‚¹ç»´æŠ¤/">ç«™ç‚¹ç»´æŠ¤</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç”Ÿæ´»/">ç”Ÿæ´»</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/ç”Ÿæ´»/" style="font-size: 10px;">ç”Ÿæ´»</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/16/hexo_ä½¿ç”¨æŠ€å·§/">hexo_ä½¿ç”¨æŠ€å·§</a>
          </li>
        
          <li>
            <a href="/2018/12/06/å¤šå­¦ä¹  å¤šå‡†å¤‡ æŠ“ä½æœºä¼š/">å¤šå­¦ä¹  å¤šå‡†å¤‡ æŠ“ä½æœºä¼š</a>
          </li>
        
          <li>
            <a href="/2018/12/05/é¡¹ç›®3.comprehensive-data-exploration-with-python/">é¡¹ç›®å­¦ä¹ 3.Kaggleåˆ©ç”¨pythonå¯¹æ•°æ®çš„æ¢ç´¢æ€§ç†è§£</a>
          </li>
        
          <li>
            <a href="/2018/12/03/é¡¹ç›®2.è§†é¢‘ç½‘ç«™æ•°æ®/">é¡¹ç›®å­¦ä¹ 2.è§†é¢‘ç½‘ç«™æ•°æ®æ¸…æ´—æ•´ç†</a>
          </li>
        
          <li>
            <a href="/2018/12/01/é¡¹ç›®1.çŸ¥ä¹æ•°æ®æ¸…æ´—æ•´ç†å’Œç»“è®ºç ”ç©¶/">é¡¹ç›®å­¦ä¹ 1.çŸ¥ä¹æ•°æ®æ¸…æ´—æ•´ç†å’Œç»“è®ºç ”ç©¶</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 è¨å°”èŒ¨å ¡çš„æ ‘æ<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">æ–‡ç« åˆ—è¡¨</a>
  
    <a href="/about" class="mobile-nav-link">å…³äº</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="totop"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- å¤šè¯´å…¬å…±jsä»£ç  start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- å¤šè¯´å…¬å…±jsä»£ç  end -->


<!-- ç™¾åº¦åˆ†äº« start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
    <a class="article-share-qq" data-cmd="sqq" title="åˆ†äº«åˆ°QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a>
    <a class="article-share-more" data-cmd="more" title="æ›´å¤š"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- ç™¾åº¦åˆ†äº« end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
